<!--component/calendar/calendar.wxml-->
<view class="calendar">
    <view class="title">
        <view class="header-wrap">
            <view class="flex">
                <view class="title">{{title}}</view>
                <view class="month">
                    <block wx:if="{{title}}">
                        (
                    </block>
                    {{selectDay.year}}å¹´{{selectDay.month}}æœˆ
                    <block wx:if="{{title}}">
                        )
                    </block>
                </view>
            </view>
            <block wx:if="{{goNow}}">
                <view wx:if="{{open && !(nowDay.year==selectDay.year&&nowDay.month==selectDay.month&&nowDay.day==selectDay.day)}}" class="today" bindtap="switchNowDate">
                    ä»Šæ—¥
                </view>
            </block>
        </view>

    </view>

    <!-- æ—¥å†å¤´éƒ¨ -->
    <view class="flex-around calendar-week">
        <view class="view">ä¸€</view>
        <view class="view">äºŒ</view>
        <view class="view">ä¸‰</view>
        <view class="view">å››</view>
        <view class="view">äº”</view>
        <view class="view">å…­</view>
        <view class="view">æ—¥</view>
    </view>
    <!-- æ—¥å†ä¸»ä½“ -->
    <swiper class="swiper" style="height:{{swiperHeight}}rpx" bindchange="swiperChange" circular="{{true}}" current="{{swiperCurrent}}" duration="{{swiperDuration}}">
        <swiper-item wx:for="{{[dateList0, dateList1, dateList2]}}" wx:for-index="listIndex" wx:for-item="listItem" wx:key="listIndex">
            <view class="flex-start flex-wrap calendar-main" style="height:{{listItem.length/7*82}}rpx">
                <view wx:for="{{listItem}}" wx:key="dateList" class="day">
                    <view class="bg {{item.month === selectDay.month?spotMap['y'+item.year+'m'+item.month+'d'+item.day]?spotMap['y'+item.year+'m'+item.month+'d'+item.day]:'':''}} {{(item.year === nowDay.year && item.month === nowDay.month && item.day === nowDay.day) ? 'now' : ''}} {{(item.year === selectDay.year && item.month === selectDay.month) ? (item.day === selectDay.day && oldCurrent === listIndex ?'select':''): 'other-month'}}" catchtap="selectChange" data-day="{{item.day}}" data-year="{{item.year}}" data-month="{{item.month}}">
                        {{item.day}}
                    </view>
                </view>
            </view>


        </swiper-item>
    </swiper>
    <view catchtap="openChange" class="flex list-open">
        <view class="icon {{open?'fold':'unfold'}}"></view>
    </view>

    <!-- é¢„ç®— -->
    <!--pages/consume/consume.wxml-->
    <view>
        <!-- <view>æœ¬æœˆé¢„ç®—(ï¿¥)</view> -->
        <view class='container' style="height: auto">
            <form bindsubmit="btnSub">
                <view class="yusuan">æœ¬æœˆé¢„ç®—ï¼š<input name="budget" type="number" value="{{budget}}" />
                    <button type="default" size="mini" form-type='submit' bindtap="upchange">æ›´æ–°</button>
                </view>


            </form>
        </view>
    </view>
    <view class="page flex-wrp">
        <view class="flex-item flex-item-center demo-text-1">
            <view class="flex-item-center-west demo-text-3">
                <view class='flex-item-center-west-child' style="margin-left: 30rpx;"><text>ğŸ“†æœ¬æœˆæ¶ˆè´¹</text></view>
                <view class='flex-item-center-west-child cost-style'>ï¿¥{{monthSpend}}</view>
                <view class='flex-item-center-west-child' style="width:200rpx;margin-left: 430rpx;margin-top: -250rpx;"><text>ğŸ“…ä»Šæ—¥æ¶ˆè´¹</text></view>
                <view class='flex-item-center-west-child cost-style' style="margin-left: 400rpx;">ï¿¥{{todaySpend}}</view>
            </view>
            <!-- <view class="flex-item-center-center demo-text-4">
                <view wx:if='{{usagePercentage==100}}'>
                    <vant-circle value='{{usagePercentage}}' strokeWidth='20' color='red'>{{usagePercentage}}%</vant-circle>
                </view>
                <view wx:else=''>
                    <vant-circle value='{{usagePercentage}}' strokeWidth='20'>{{usagePercentage}}%</vant-circle>
                </view>
            </view> -->
        </view>
        <view class="flex-item flex-item-south demo-text-2">
            <view>
                <view>ğŸºæ—¥å‡æ¶ˆè´¹</view>
                <view style="margin-left: 30rpx;">ï¿¥{{avgSpendPerDay}}</view>
            </view>
            <view>
                <view>ğŸ¥‚æœ¬æœˆå‰©ä½™</view>
                <view style="margin-left: 30rpx;">ï¿¥{{monthAvailable}}</view>
            </view>
            <view>
                <view>ğŸŒœæ—¥å‡å¯ç”¨</view>
                <view style="margin-left: 30rpx;">ï¿¥{{dayAvgAvailable}}</view>
            </view>
            <view>
                <view>ğŸŒè·ç¦»æœˆæœ«</view>
                <view style="margin-left: 70rpx;">{{monthLeftDay}}å¤©</view>
            </view>
        </view>
    </view>


</view>
